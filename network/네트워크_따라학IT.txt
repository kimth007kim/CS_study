01. 네트워크란 무엇인가?
서로 연결되어있는 통신망
노드들이 데이터를 공유할수있게하는 디지털 전기 통신망

-인터넷은 무엇인가?
인터넷은 이세상의 통신망 중에 가장 큰 통신망
문서,그림 영상과 같이 여러가지 데이터를 주고받을수있는 전세계를 연결하는 네트워크


-네트워크 의 분류

*크기에 따른 분류

LAN- Local Area Network 가까운 지역만 연결해놓은 네트워크
WAN-Wide Area Network 먼거리를 연결해놓은 네트워크, 여러개의 가까운 지역끼리 묶인 LAN 과 LAN을 다시 하나로 묶은것

*연결 형태에 따른 분류

Star형  - 중앙 장비에 모든 노드(컴퓨터)가 연결된것
단점: 중앙의 장비가 고장이나면, 모든 노드가 장애가 날수밖에 없다.
가까운 지역에 있는 장비들을 연결할때 많이 이용한다, 비용을 절약할수있다.

Mesh형- 여러 노드들이 서로 그물처럼 연결된것
먼지역에 떨어져있을때 많이 사용한다.
https://www.submarinecablemap.com/

세계의 네트워크가 어떻게 연결되어있는지 보여주는 사이트

-네트워크의 통신방식

네트워크에서 데이터는 어떻게 주고받는가?

	유니캐스트: 내가 통신하고싶은 한 사용자만 통신 (이름 한명만 부르기)
	멀티캐스트: 같은 네트워크 대역에서 특정한 다수랑 통신 (한 분단에만 부르기)
	브로드캐스트: 같은 네트워크 대역에서 전부다랑 통신( 강의실 전부에게 부르기)

-네트워크 프로토콜
프로토콜이란?

컴퓨터는 네트워크망에서 많은 컴퓨터중에서 어떻게 목표 하나만 찾아서 갈수있을까? 
네트워크 통신망에서 특정 컴퓨터랑 통신할때 프로토콜을 사용하는데 프로토콜은 양식이다.

택배양식라고 생각하면편하다. 보내는 사람의 양식,받는 사람의 양식을 적어서 보내야한다.
그 양식에맞게 작성을 해주면된다.

가까운곳과 연락할때,멀리있는곳과 연락할때, 여러 프로그램으로 연락할때 양식이 각각있다.

 		 프로토콜  주소
가까운곳과 연락할때: 이더넷(mac주소)
멀리있는곳과 연락할때: ICMP,IPv4(IP 주소)
여러 프로그램으로 연락할때: TCP,UDP(포트 번호)

여러가지 프로토콜이 어떻게 생겼는지 보면
    Ethernet IPv4 TCP 데이터

이렇게 생겼다, 여러가지 주소를 함께 사용한다. 이것을 캡슐화라고 부른다.

============================================================================================================================================================================================================================

01. 네트워크란 무엇인가? -실습1(tracert)

cmd에서
kyungdong>tracert 8.8.8.8   		//8.8.8.8은 구글 dns 서버의 ip 주소이다.
				//tracert 트레이스 라우트라는 프로그램을 실행해주는것이다.


내컴퓨터 와 구글간에 연결하기위해 거쳐간 네트워크 LAN 대역들이다.
구글까지 갈때 10개거쳐갔다. 보통전세계의 네트워크망은 15개 내로 이루어져있다.
연결해놓은게 WAN 이고 이것이 네트워크이다.

안산->분당->분당->분당->켄자스->켄자스->켄자스

실제로 멀리떨어져있는애들은 이렇게 연결되어있다. ip주소로 찾아간다.

============================================================================================================================================================================================================================

01. 네트워크란 무엇인가? - 실습2(Wireshark)
wireshark 를 실행해서 http 를 필터에 등록해두고 http://www.danawa.com 같이 http로 된사이트를 들어가보자

wireshark에서 html과 css를 보면 http프로토콜로 보낸것이다.
사용한것은 http protocol, ipv4 ,ethernet,tcp 를 사용한다.


http: 서버에있는 html,css파일을 전송하기위해서 사용함
ipv4: 멀리 떨어져있으니까 IPV4 프로토콜을 사용
ethernet: 찾아왔더니 여러컴퓨터가있어서 특정컴퓨터를 찾을때 사용하는 프로토콜
TCP: 인터넷할때 크롬을 쓰는데, 다나와에 있는 프로그램이랑 연결되어야되서 사용됨

같이사용되는것을 인캡슐레이션이라고한다.

============================================================================================================================================================================================================================

02. 네트워크의 기준! 네트워크 모델

네트워크의 표준이되는 두개의 모델을 살펴보자

1. TCP /IP  
2. OSI7계층 두가지가있다.

1.TCP/IP 모델
계속해서 사용되는 기술

4계층 응용
3계층 전송
2계층 네트워크
1계층 네트워크 인터페이스 


2.OSI 7계층

통신 전체를 체계적으로 다루는 모델

7계층 응용 - HTTP 웹 통신
6계층 표현
5계층 세션
4계층 전송 - TCP,UDP
3계층 네트워크  - IP,ICMP,ARP
2계층 데이터 링크 - 이더넷
1계층 물리

*TCP/IP  와 OSI 7계층의 공통점
ㅍ
네트워크를 계층으로 나눴다.

*TCP/IP  와 OSI 7계층의 차이점

OSI 7계층 논리적으로 역할 나눔
TCP/ IP는 프로토콜(실무적) 으로 나눔

네트워크를 통해서 전달되는 데이터 패킷

패킷: 네트워크에서 잔달되는 데이터, 블록단위로 나누어져있다.
패킷은 여러가지 프로토콜의 조합으로 이루어져있다. 프로토콜도 순서가있다.


패킷은
헤더 페이로드 풋터로 구성되어있다.

헤더: 
페이로드: 실질적으로 보내려고 하는것들
푸터: 일반적으로 잘 사용하지않는다.


http프로토콜을 페이로드로해서 TCP프로토콜을 헤더로해서 붙임

헤더 	페이로드
TCP	 HTTP

IPV4 	TCP HTTP

Ethernet	 IPV4 TCP HTTP

캡슐화는 이런식을 보내는것이고 보통 프로토콜을 누군가에게 보낼때 사용한다.

보낼때는 패킷을 만드는 과정으로는
TCP 를 헤더로 하고 데이터 를 페이로드로 캡슐화 하고
IPV4 를 헤더로 하고 TCP HTTP를 페이로드로 캡슐화 하고
Ethernet을 헤더로 하고 IPV4 TCP HTTP 를 페이로드로 캡슐화를 끝내서 패킷을 만든다.

여러 프로토콜을 이용해서 최종적으로 보낼 때 패킷을 만드는 과정
 
Ethernet	 (IPV4 TCP HTTP) : 헤더인 Ethernet을 확인한다.
IPV4 	(TCP,HTTP): 헤더인 IPV4를 확인한다.
TCP	(HTTP): 헤더 TCP를 확인하고, 남은 페이로드인 HTTP를 확인한다.


계층별 패킷의 이름 PDU

4계층의 PDU = 세그먼트
TCP	 HTTP

3계층의 PDU = 패킷
IPV4 	TCP HTTP

2계층의 PDU = 프레임
Ethernet	 IPV4 TCP HTTP


======================================================================================================================================================================================================================================================================================================================================================

03. 가까이 있는 컴퓨터끼리는 이렇게 데이터를 주고받는다

MAC주소 - 2계층(데이터링크) 계층에서 사용하는 주소

OSI7 layer에서
2계층이 하는 역할: 가까이 있는 컴퓨터(local area)의 컴퓨터는 어떻게 통신을 하는가

2계층에서 하는 역할: 같은 LAN대역안 에서 존재하는 노드들,  어떤장비가 어떤장비에게 데이터를 전달하는지, 내가 전달하는 데이터가 오류가있는지 없는지 제어
							흐름제어, 					오류제어

같은  네트워크(LAN)대역내 말고 다른 (MAN)네트워크랑 통신할때는 3계층도 필요하다.

2계층에서 사용하는주소
MAC 주소: 물리적인 주소 16진수로 쓰고, 쓸때 2개씩 나눠서 12개의 16진수로 이루어짐
oo-oo-oo     		oo-oo-oo 
제조사 식별ID		고유번호

MAC주소는 전세계의 기기들이 다르다, MAC주소는 쉽게 바꿀수없다. 고유한 값을 가진다.

destination Adress(목적지 주소): 받는 사람의 MAC주소가 들어간다. 6Byte
source Adress(출발지 주소): 주는 사람의 MAC주소  6Byte
Protocol Type(상위 프로토콜 타입): 페이로드안에 상위 프로토콜(3계층) 프로토콜을 미리 알려주는역할
				2Byte, IPv4(0x0800) ,ARP(0x0806)

mac주소 확인하기
cmd $ipconfig /all



======================================================================================================================================================================================================================================================================================================================================================

04. 실제로 컴퓨터끼리는 IP주소를 사용해 데이터를 주고받는다

실제로 컴퓨터 끼리는 mac주소로 통신을 하지만, 실제로 컴퓨터 끼리 ip주소로 통신한다.

IP주소- 3계층(네트워크 계층)에서 사용하는 주소

3계층의 역할- 서로 다른 네트워크(LAN과 LAN)대역을 연결 시켜주는 역할을 한다.
3계층에 대표적인 장비는 라우터이다.(LAN과 LAN)을 연결시켜주려면 3계층 장비가 필요하다.

멀리있는곳(서로다른 LAN)과 통신하려면 IP주소와 3계층 장비가 필요하다.

멀리있는곳과 통신하려면 MAC주소+IP주소 가 필요하다.


멀리있는곳과 통신하기위한 최소한의 설정
1. IP주소
2. 서브넷 마스크
3. 게이트웨이

인터넷할때는 IP주소로 통신하지는 않는다. 도메인주소로 통신하는데 IP주소를 도메인 주소로 바꿔주는 역할을 하는것이 기본설정 DNS서버 이다.
IP주소만 있다고 해서 멀리와 통신할수 있는 것이아니다.

3계층 프로토콜의 종류

ARP 프로토콜: IP주소를 이용해서 MAC주소를 알아오는 프로토콜
IPv4 프로토콜: WAN에서 통신할때 사용되는 프로토콜
ICMP 프로토콜: WAN 에서 통신이 되는지 확인할때 사용하는 프로토콜


일반적인 IP주소

IP주소는 네개로 구분되어있다. 4BYTE로 되어있고 10진수로 쓴다. 1BYTE가 8bit 이므로 2^8(1byte=8bit이므로) 표현할수 있는 수의 범위는 0~255이다
0.0.0.0~255.255.255.255까지

IP주소가 처음 나왔을때는 Classful Ip주소로 썼다.
범위를 클래스에 맞게 나눈것이 Classful Ip이다.

A클래스 0.0.0.0			127.255.255.255
B클래스 128.0.0.0			191.255.255.255
B클래스 128.0.0.0			223.255.255.255
B클래스 128.0.0.0			239.255.255.255
E클래스 240.0.0.0			255.255.255.255

알기쉽게 하려면 어떻게 해야하는가
2진수로 바꾸어보면된다. 


총범위    00000000.00000000.00000000.00000000	~		11111111.11111111.11111111.11111111

A클래스  0 0000000.00000000.00000000.00000000	~		01111111.11111111.11111111.11111111
B클래스  10 000000.00000000.00000000.00000000	~		10 111111.11111111.11111111.11111111
C클래스  110 00000.00000000.00000000.00000000	~		110 11111.11111111.11111111.11111111
D클래스  1110 0000.00000000.00000000.00000000	~		1100 1111.11111111.11111111.11111111
E클래스  1111 0000.00000000.00000000.00000000	~		11111111.11111111.11111111.11111111


클래스 별로 나눠서 IP주소를 사용하다보면서 생긴문제가 뭐냐면 IP주소가 낭비가 된다.

하나의 큰 네트워크를 쪼개서 쓰자라고 결정을 했다.
Classless 한 방식

서브넷 마스크- 보조 단위로 잘개 쪼갠 값이라는 의미이다. ip 주소는 서브넷 마스크와 같이 쓴다.

서브넷마스크의 특징
네트워크 대역을 나눠주는데 사용하는 값이다.
2진수로 표기했을때 1로 시작 1과 1사이에는 0이올수 없다는 규칙이있다.


ex)
					네트워크 대역을 구분하는 값             같은 네트워크 대역에서 속해있는 컴퓨터를 구분하는 값
255.255.255.192			->   11111111.11111111.11111111.11            000000
이 네트워크대역에서 사용할수 있는 컴퓨터의 대수는 0~63 총 64대

이렇게 나눈다면 낭비되는 ip주소를 줄일수 있다.

ip주소가 부족하게되는 현상이 생기게됨으로 사설ip와 공인 ip로 나누게된다.

공인ip는 = 네트워크 통신망이랑 통신할때 사용하는 ip주소(공유기에 할당된 ip)
사설ip는 = 같은 네트워크대역에서 사용하는 ip주소

공유기를 타고 밖으로 나갈떄 공인 ip 로 바뀌어서 나간다.


웹툰을 보고 싶으면 웹툰을 누르면 공유기(공인ip)에 들어오고  공유기에서 사설ip에다가 전달해줌
이러한 과정을 NAT라고 부른다.

집에서 네트워크 장비를 많이 사용한다. 컴퓨터 노트북 핸드폰 등등
그런데 인터넷은 하나만 구매한다 3만원주고, 그것이 공인ip하나를 구매한것이다.

사설ip는 공유기만알고있고, 네이버 구글등이 알수가없다. 나갈때 NAT 테이블에 기록을한다.
나간적이없는데 우리 공유기한테 무언가를 보내면 어떻게될까? 공유기가 받고 끝난다.

특수한 IP 주소
0.0.0.0: 나머지 모든주소
127.0.0.1: 자신을 나타내는주소
게이트웨이주소: 일반적으로 공유기의  IP주소를 사용한다.
외부세상으로 나가는 문이다. IP를 설정할때 외부랑 통신할때 문이 어딘지 알려주는 주소 

게이트웨이 설정안해도 설정이되는데 인터넷이 안된다. 외부에 문이 어딘지 몰라서 안된다

따라서  세가지가 있어야 인터넷이된다.
1. IP주소
2. 서브넷 마스크
3. 게이트웨이



======================================================================================================================================================================================================================================================================================================================================================

05. 통신하기 전 반드시 필요한 ARP 프로토콜 - 이론


ARP 프로토콜이 하는일?
-통신할때 IP주소를 사용한다. 이더넷프로토콜에 MAC주소가 들어가야하는데, IP주소를 입력해야한다.
IP주소를 입력했을때 상대방의 맥주소를 알아보게되는데 상대방의 맥주소를 알아보게된다.
IP주소는 알고 MAC주소는 모르더다도 ARP를 통해서 통신이 가능하다.

ARP 프로토콜의 구조
28 Byte로 구성되어있다.

Hardware Type: 2계층(데이터 링크 계층에서 사용하는 하드웨어의 타입) 16진수로 0 0 0 1이 온다 (이더넷을 뜻함)
protocol Type: 프로토콜의 타입인 ipv4가 오게된다.


Hardware Address Length:하드웨어 주소 길이: 0 6 가 들어간다. (6byte이기 때문에)
Protocol Address Length: 프로토콜 주소 길이: 0 4  가 들어간다. (4byte이기 때문에)
Opcode: 물어보고있는지 응답해주는지 알려주는 값  1이면 - 물어보는거 2이면 - 응답하는것


source hardware address : 출발지의 물리적인주소(mac주소) - 6byte
source Protocol address:  출발지의 IP주소 - 4byte

destination hardware address : 도착지의 물리적인주소(mac주소) - 6byte
destination Protocol address:  도착지의 IP주소 - 4byte



 arp 요청을하는데 목적지 맥주소를 모른다. 
요청프로토콜을 만들때 0001 opCode만들고
목적지 arp의맥주소는 모르기떄문에 00000000으로 채워넣는다.

그리고 Ethernet의  목적지 맥주소는 ff ff ff ff ff ff (broadcast: 같은 LAN안의 모든것)으로쓴다.

======================================================================================================================================================================================================================================================================================================================================================

06. 멀리 있는 컴퓨터끼리는 이렇게 데이터를 주고받는다 - IP 프로토콜 구조


IPv4 의 역할: 네트워크 상에서 데이터를 교환하기 위한 프로토콜
데이터가 정확하게 전달하는거슬 보장하지않음

ipv4 프로토콜구조
20byte로 구성되어있다.
최대 60byte

ip protocol의 버전:4 bit (16진수 하나)
헤더의길이: 4bit (2진수 4개 최대 표현할수있는 수는 16이어서 ex) 20 //4 = 5 or ex)16 //4=4)
TOS: 옛날에 처음썼었음 주고받는 데이터의 형식(지금은 사용x)
Total Length: 상위에서부터 내려온 전체의 길이
identification ,ip flags, fragment offset: 큰것을 보낼때 잘게잘게 쪼개서보낼때 알아볼수있게 보낼때 사용하는 세트들
TTL(TIME TO LIVE): 패킷이 살아있을수 있는 시간(언젠가는 없어져야한다.
protocol: 상위 프로토콜이 뭔지 알려주는것이다. 
header checksum: 이 헤더가 오류가있는지 없는지확인하는것이다.

출발지 ip 주소 4byte
목적지 ip 주소 4byte

======================================================================================================================================================================================================================================================================================================================================================

06. 멀리 있는 컴퓨터끼리는 이렇게 데이터를 주고받는다 - ICMP 프로토콜

icmp프로토콜은 제어메시지를 주고받는 프로토콜(상대방과 통신이 되나 안되나 확인하는 프로토콜

icmp 프로토콜 구조

type (중요)
	0번: 응답
	8번: 요청
	
	3번: 목적지 도착x(목적지까지 못갔을때0
	11번: 요청시간 만료(목적지까지 갔는데 응답x , 상대방 문제)

code

checksum

======================================================================================================================================================================================================================================================================================================================================================


 06. 멀리 있는 컴퓨터끼리는 이렇게 데이터를 주고받는다 - IPv4, ICMP프로토콜 실습



======================================================================================================================================================================================================================================================================================================================================================

06. 멀리 있는 컴퓨터끼리는 이렇게 데이터를 주고받는다 - 라우팅 테이블 및 전송 과정

3계층의  대표적인역할이 최적의 경로로 찾아가는것인데, 지도처럼 저장하는녀석이 라우팅 테이블이다.
여기에 저장되어있지 않은 네트워크대역은 찾아갈수가없다.
netstat -r 이라는 명령어로 확인해볼수있다.
지도가 있어야지만 해당하는 경로를 찾아갈수있다. 지도상에 작성할때 이런걸하나 넣어준다.
기본값을 넣는데, 0.0.0.0 이다. 




======================================================================================================================================================================================================================================================================================================================================================

06. 멀리 있는 컴퓨터끼리는 이렇게 데이터를 주고받는다 - 라우팅 테이블 확인 실습

라우팅테이블에는 네트워크 대역이 쓰여져있다.

======================================================================================================================================================================================================================================================================================================================================================

07. 컴퓨터의 프로그램끼리는 이렇게 데이터를 주고 받는다 - 4계층 이론

상대방의 동작하고있는 프로그램중에서 내컴퓨터의 특정 프로그램이 어떻게 주고받는지 알아보자(클라이언트 서버 개념이다.)
게임서버랑 게임 클라이언트 가 어떻게 주고받는지 이야기이다.

이역할은 4계층에서 담당을한다.

4계층:전송계층 프로세스와 프로세스를 연결하는 통신서비스
TCP :연결 지향형 프로토콜
UDP : 비 연결 지향형 프로토콜
프로토콜이있다.

포트 번호:4계층에서 사용하는 주소
특정 프로그램이 사용하는 주소, 프로그램 하나가 포트번호 하나만 사용할수있다.
하나의 프로세스는 여러가지 포트번호를 가질수있다.

well known port

ftp: 20,21번
ssh: 22번
telnet: 23번
dns: 53번
dhcp: 67번,68번
tftp: 69번
http: 80번 (네이버) 웹서버가 사용하는 포트번호
https: 443번

dynamic port(일반 사용자들이사용) 접속하는 사용자가 사용하는 포트번호
49152~65535번

포트번호가 절대적이지않다.

현재 포트활성여부를 나타내는 활성연결 테이블 명령어 
netstat -ano

======================================================================================================================================================================================================================================================================================================================================================

08. 비연결지향형 UDP 프로토콜 - 이론


단순한 전송방식을 사용하는 프로토콜, 상대방과 연결되어있는 상태를 지향하지않는다. 
연결된 상태에서 데이터를 교환하는게 아니라서 신뢰성이 낮다.

udp 프로토콜의 구조

출발지 포트번호 2byte
목적지 포트번호 2byt
길이 udp프로토콜 헤더+ 페이로드까지 합친 길이
체크섬 중간에 데이터 손상되지않았나 체크하는 값


포트번호는 0번~65536번

4계층은 프로그램과 프로그램간의 통신 , udp 프로토콜을 사용하는 프로그램
dns서버:  도메인을 물으면 IP를 알려줌
tftp 서버:  파일전송프로그램
RIP 프로토콜: 라우팅 정보를 공유함



======================================================================================================================================================================================================================================================================================================================================================

08. 비연결지향형 UDP 프로토콜 - tftpd로 파일 전송 실습


UDP프로토콜을 이용하는 프로그램중에 대표적인것은 TFTPD이다. 파일을 전송하는프로그램이다.
파일전송을 UDP 로 하면 좋을까? 안좋을까?
 큰파일을 전송할때는 UDP로 전송하지않는다. 하지만 동영상 스트리밍 서비스를 이용할때는 UDP로 사용한다.
TFTP 는 7계층프로토콜이다.

======================================================================================================================================================================================================================================================================================================================================================











